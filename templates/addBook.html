{% extends "base.html" %}



{%block add_book%}

<div class="container_main" >

    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="book" class="svg_main svg-inline--fa fa-book fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"/></svg>
    </div>
    <div class="headline">
      <h3>
      {%if submitted == True%}
      Thank you! You can add as many books as you like!
       {%elif submitted == False%}
       Something went wrong
      {%else%}
      Please add a new book by using the form bellow:
      {%endif%}
      <h3>
    </div>

<form action="{{ url_for('addBook') }}" method="POST" class="general_form" id="add_book_form">
    <label for="title">Book title <span class="error">*</span>&nbsp</label><span class="error" id="titleError"></span><br>
    <input type="text" name="title" id="title" value="" placeholder="Book title"> <span class="error" id="titleError"></span>
       <br>

    <label for="description">Description <span class="error">*</span></label> <span class="error" id="descriptionError"></span> <br>    
    <textarea name="description" id="description" placeholder="" rows="4" ></textarea>
        <br>

    <label for="genre">Genre<span class="error">*</span></label> <span class="error" id="genreError"></span>  <br>  
    <select name="genre" id="add_genre" >
        {% set select = ["Choose genre", "Comics", "Drama", "Science", "Fiction"]%}
        {% set selected = ""%}
        {%for eachOption in select%}
           {%if eachOption == genre%}
           {%set selected = "selected"%}
           {%endif%}
          <option value="{{eachOption}}" {{selected}}>{{eachOption}}</option>
        {%endfor%}
      </select>
      <br>
      <label for="author">Author</label><br> 
      <input type="text" name="author" id="author" value="">
      <br>
      <label for="img">Image URL</label><br> 
      <input type="text" name="img" id="img" value="">
      <br>
      <label for="isbn10">ISBN10</label><br> 
      <input type="text" name="isbn10" id="isbn10" value="">
      <br>
      <label for="isbn13">ISBN13</label><br> 
      <input type="text" name="isbn13" id="isbn13" value="">
      <br>
      <label for="format">Format</label><br> 
      <input type="text" name="format" id="format" value="">
      <br>
      <label for="language">Language</label><br> 
      <input type="text" name="language" id="language" value="">
      <br>
      <label for="publisher">Publisher</label><br> 
      <input type="text" name="publisher" id="publisher" value="">
      <br>
      <label for="amazon">Amazon books URL</label><br> 
      <input type="text" name="amazon" id="amazon" value="">
      <br>
      <input type="hidden" name="user_name" value="{{user}}">
 
  </form>
      <div class="form_wrap">
     <button class="form_btn" id="add_btn" onclick="validate()" >Add a book</button>
  </div>




<script>
  function validate() {
    var title =  document.getElementById('title').value;
   
   var description = document.getElementById('description').value;
    var genre = document.getElementById('add_genre').value;
   if (title == ""){
    document.getElementById("titleError").innerHTML = "Please fill in this field";}
   else{
     document.getElementById("titleError").innerHTML =""
   }
   if (description == ""){
    document.getElementById("descriptionError").innerHTML = "Please fill in this field";}
   else{
     document.getElementById("descriptionError").innerHTML = ""
   }
   if (genre == "Choose genre"){
    document.getElementById("genreError").innerHTML = "Please choose genre";}
   else{
     document.getElementById("genreError").innerHTML = ""
   }
   if(title != "" && description != "" && genre != "Choose genre"){document.getElementById("add_book_form").submit();}
}
</script>

{%endblock%}