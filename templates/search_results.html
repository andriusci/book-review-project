{% extends "base.html" %}


{% block search_result%}

<div class="container centered">

     {%if total_results == 0%}
        <h3>Unfortunately your search delivered no results :(</h3>
     {%endif%}

     {% for eachBook in books %}
<!--Container shows book cover image, title, description and if available, link to amazon page -->
  <div class="result_container">
    <div class="row">

      <div class=" col-xs-5 col-sm-3 ">
         <a href="/Book_page/book_id:{{eachBook._id}}"> <img class="result_img" src=" {{ eachBook.image}} "alt="Book cover image"></a>
      </div>

      <div class=" col-xs-7 col-sm-9 ">
         <div class="title">
           <h4>  <strong> <a href="/Book_page/book_id:{{eachBook._id}}">{{ eachBook.title }} </a></strong></h4>
         </div>
         <hr class="thin_line">
         
         <div class="description">
           <p>
              {{eachBook.description}}
          </p>
         
         </div>

         {%if eachBook.amazon != ""%}
    
        <div class="affiliate">
          By at <a href="{{eachBook.amazon}}" target="_blank">Amazon <i class="fas fa-external-link-alt"></i></a> 
        </div>
         {%endif%}

      </div>

    </div>
  </div>

     {% endfor %}

</div>

{%endblock%}





{% block pagination%}

{%if total_pages > 1%}
<!--paginition-->
<footer>
<div class="paginition">
  {%if current_page > 1 and current_page <= total_pages%}
        {%set go_to_page = current_page - 1%}
        <a href="/Search:{{search_term}}/Genre:{{genre}}/Page:{{go_to_page}}"><strong>
        << previous</strong> </a> {%endif%} {%if total_pages != 0%} <form action="{{ url_for('pagination') }}"
        method="POST">
        <input type="hidden" name="search" value="{{search_term}}">
        <input type="hidden" name="genre" value="{{genre}}">
        <input type="text" name="go to" value="{{current_page}}" id="goTo">
        <input type="submit" value="GO" id="go_btn">
        </form>
  {%endif%}


  {%if current_page < total_pages%}
        {%set go_to_page = current_page + 1%}
        <a href="/Search:{{search_term}}/Genre:{{genre}}/Page:{{go_to_page}}"><strong>next >> </strong></a>
  {%endif%}
</div>

  {#incase the user enters a page number that does not exist:#}
  {#returns an error with exlanation and a paginition number box#}
  {%if current_page > total_pages and total_pages != 0%}
  <div class="centered">
  <h4>
     Unfortunately page {{current_page}} does not exist. Your search returned {{total_pages}} page(s).
  </h4>
  <p>
    Please enter the page number between 1 and {{total_pages}}
  </p>
  {%endif%}

</footer>
{%endif%}

{% endblock %}